<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Details</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --text-dark: #202124;
            --text-gray: #5f6368;
            --primary-blue: #1b73e8;
            --border-light: #dadce0;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Roboto', sans-serif; background: #fff; color: var(--text-dark); padding-bottom: 80px; }

        header {
            display: flex;
            align-items: center;
            padding: 16px;
            height: 56px;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }
        .back-btn { text-decoration: none; color: var(--text-dark); margin-right: 24px; display: flex; align-items: center; }
        header h1 { font-size: 20px; font-weight: 500; flex-grow: 1; }
        .refresh-icon { width: 24px; height: 24px; fill: var(--text-dark); }

        main { padding: 16px; }

        .card-preview {
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .card-preview img { width: 100%; display: block; }

        .info-section { margin-bottom: 24px; }
        .label { font-size: 14px; color: var(--text-gray); margin-bottom: 4px; }
        .value { font-size: 16px; font-weight: 500; }

        .support-row {
            display: flex;
            align-items: center;
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            margin-top: 8px;
        }
        .support-row svg { margin-right: 8px; }

        .ticket-info-header {
            display: flex;
            align-items: center; 
            padding: 16px 0;
            border-top: 1px solid var(--border-light);
            margin-top: 16px;
            cursor: pointer;
        }
        .ticket-info-title { font-size: 16px; font-weight: 500; margin-right: 4px; } 
        
        .arrow-icon {
            transition: transform 0.3s ease;
            fill: var(--text-gray);
            width: 20px;
            height: 20px;
            transform: rotate(-90deg);
        }
        .arrow-icon.expanded { transform: rotate(0deg); }

        #details-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            max-height: 0px; 
        }

        .details-inner {
            font-size: 12.5px;
            color: var(--text-gray);
            line-height: 1.5;
            padding-bottom: 40px;
        }
        .general-header { font-weight: 700; display: block; margin-bottom: 4px; }
        .details-id { margin-top: 4px; }
        .details-desc { margin-top: 10px; }

        .footer-btn-container {
            position: fixed;
            bottom: 0;
            width: 100%;
            padding: 16px;
            background: white;
            border-top: 1px solid var(--border-light);
        }
        .primary-btn {
            display: block;
            width: 100%;
            background: var(--primary-blue);
            color: white;
            text-align: center;
            padding: 14px;
            border-radius: 24px;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="back-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
    </a>
    <h1>Ticket Details</h1>
    <svg class="refresh-icon" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
</header>

<main>
    <div class="card-preview">
        <img src="card.png" alt="Ticket Card">
    </div>

    <div class="info-section">
        <div class="label">Active until</div>
        <div class="value" id="dynamic-expiry">Loading...</div>
    </div>

    <div class="info-section">
        <div class="label">Having trouble?</div>
        <a href="tel:+14052357433" class="support-row">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            Call customer support
        </a>
    </div>

    <div class="ticket-info-header" onclick="toggleDetails()">
        <span class="ticket-info-title">Ticket info</span>
        <svg id="arrow" class="arrow-icon" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
    </div>

    <div id="details-content" style="max-height: 0px;">
        <div class="details-inner">
            <span class="general-header">General</span>
            <div class="details-id" id="dynamic-purchase">Loading purchase date...</div>
            <div class="details-id">ID pass_p0Lku7oATWeKplpxJye7qQ</div>
            <div class="details-desc">
                The 30-Day Universal pass lets you travel anywhere in the EMBARK service area on EMBARK buses, RAPID, and OKC Streetcar services for 30 consecutive calendar days starting on the day and time of activation.
            </div>
        </div>
    </div>
</main>

<div class="footer-btn-container">
    <a href="ticket.html" class="primary-btn">Show ticket</a>
</div>

<script>
    function toggleDetails() {
        const content = document.getElementById('details-content');
        const arrow = document.getElementById('arrow');
        if (content.style.maxHeight === '0px' || content.style.maxHeight === '') {
            content.style.maxHeight = '1000px'; 
            arrow.classList.add('expanded');
        } else {
            content.style.maxHeight = '0px'; 
            arrow.classList.remove('expanded');
        }
    }

    function formatTicketDate(dateObj) {
        const month = dateObj.getMonth() + 1;
        const day = dateObj.getDate();
        const year = dateObj.getFullYear();
        
        let hours = dateObj.getHours();
        const minutes = dateObj.getMinutes().toString().padStart(2, '0');
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; 

        return `${month}/${day}/${year}, ${hours}:${minutes} ${ampm}`;
    }

    function updateAllDates() {
        const now = new Date();
        const expiryDate = new Date(now.getTime());
        expiryDate.setDate(expiryDate.getDate() + 7);
        expiryDate.setHours(expiryDate.getHours() + 2);
        expiryDate.setMinutes(expiryDate.getMinutes() + 33);
        document.getElementById('dynamic-expiry').innerText = formatTicketDate(expiryDate);

        const purchaseDate = new Date(now.getTime());
        purchaseDate.setDate(purchaseDate.getDate() - 22);
        purchaseDate.setHours(purchaseDate.getHours() - 21);
        purchaseDate.setMinutes(purchaseDate.getMinutes() - 41);
        
        document.getElementById('dynamic-purchase').innerText = "Purchased on " + formatTicketDate(purchaseDate);
    }

    updateAllDates();
</script>

</body>
</html>
